<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CS171 - Final Project</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<!--	<link rel="stylesheet" type="text/css" href="css/fullpage.css">-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.css" integrity="sha512-4rPgyv5iG0PZw8E+oRdfN/Gq+yilzt9rQ8Yci2jJ15rAyBmF0HBE4wFjBkoB72cxBeg63uobaj1UcNt/scV93w==" crossorigin="anonymous" referrerpolicy="no-referrer" />

	<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="fullpage" >


<!--Visualizations Overview-->
	<div class="section demos">
		<div class="container-fluid">
			<div class="row justify-content-center">
				<div class="col justify-content-center" id="myPrevReducDemo"></div>
				<div class="col justify-content-center" id="myHistDemo"></div>
				<div class="col-4">
					<form class="form-inline">
						<div class="form-group">
							<select class="form-control" id="HistAge">
								<option value="all-together">All Ages Together</option>
								<option value="young-and-old"><50 vs >50</option>
								<option value="all-separate">All Ages Separately</option>
							</select>
							<select class="form-control" id="HistScale">
								<option value="per-capita">Scaled to Population</option>
								<option value="raw">Raw Count</option>
							</select>
						</div>
					</form>

				</div>
			</div>
			<div class="row justify-content-center" id="myScatterDemo"></div>
			<div class="col-4">
				<form class="form-inline">
					<div class="form-group">
						<select class="form-control" id="ScatterAge">
							<option value="all-together">All Ages Together</option>
							<option value="young-and-old"><50 vs >50</option>
							<option value="all-separate">All Ages Separately</option>
						</select>
						<select class="form-control" id="ScatterScale">
							<option value="per-capita">Scaled to Population</option>
							<option value="raw">Raw Count</option>
						</select>

					</div>
				</form>

			</div>
		</div>
	</div>


<!--Opening Page-->
	<div class="section title">
		<div class="container-fluid">
			<div class="row justify-content-center">
				<h1 id="header">Simpson's Paradox in Vaccine Effectiveness Estimation</h1>
			</div>
			<div class="row justify-content-center">
				<h4 id="names">Ahmed Abukar, Max Cembalest, and Mark Penrod<br><br></h4>
			</div>

			<div class="row justify-content-center slide-text intro">
				Encouraging COVID-19 vaccination is one of the most important and urgent public health pursuits in the current day.

				The major mRNA vaccines have undergone rigorous trials to ensure safety and efficacy.
				However, the process of measuring Vaccine Effectiveness (VE) is somewhat technical and when important features such as age are not taken into account VE can be misleading.
				In our project we will walk through how VE is measured, and how splitting the data by relevant attributes is a necessary component in reaching a sound analysis.
				This work is intended to help promote clear and accurate messaging regarding waning efficacy.

			</div>
		</div>
	</div>


<!--Intro Page: Vaccine Effectiveness-->
	<div class="section s2">
		<div class="container-fluid">

<!--			Title-->
			<div class="section-title">
				<h1>What is Vaccine Effectiveness? </h1>
			</div>

<!--			Description-->
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center slide-text-2">

							Vaccine efficacy and vaccine effectiveness measure the proportionate reduction from an unvaccinated cohort to a vaccinated cohort.<br>

							Vaccine efficacy is used when a study is carried out under ideal conditions, for example, during a clinical trial. Vaccine effectiveness is used when a study is carried out under typical field (that is, less than perfectly controlled) conditions.  <br>
							Vaccine efficacy/effectiveness (VE) is measured by calculating the risk of disease among vaccinated and unvaccinated persons and determining the percentage reduction in risk of disease among vaccinated persons relative to unvaccinated persons. The greater the percentage reduction of illness in the vaccinated group, the greater the vaccine efficacy/effectiveness. The basic formula is written as: <br>
							(Risk among unvaccinated group − risk among vaccinated group) / Risk among unvaccinated group <br>
							OR: 1 − risk ratio
							In the first formula, the numerator (risk among unvaccinated − risk among vaccinated) is sometimes called the risk difference or excess risk.
							Vaccine efficacy/effectiveness is interpreted as the proportionate reduction in disease among the vaccinated group. So a VE of 90% indicates a 90% reduction in disease occurrence among the vaccinated group, or a 90% reduction from the number of cases you would expect if they have not been vaccinated.
						</p>
					</div>
				</div>
			</div>

<!--			Prevalence Reduction-->
			<div   class="col justify-content-center">
				<div   class="row justify-content-center">
					<p>Prevalence reduction from New England Journal of Medicine (NEJM) <br>
				</div>
				<div   class="row justify-content-center">
					<div id="prevReduc1" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>
		</div>

	</div>

	<!--Reusable drawing of an arrow-->
	<svg xmlns="http://www.w3.org/2000/svg">
		<defs>
			<marker id="arrowhead" markerWidth="4" markerHeight="4"
					refX="0" refY="2" orient="auto" fill="black">
				<polygon points="0 0, 4 2, 0 4" />
			</marker>
		</defs>
	</svg>




<!--Compare two datasets-->
	<div class="section s2">
		<div class="container-fluid">

			<!--			Title-->
			<div class="section-title">
				<h1>Compare NEJM and Isr data</h1>
			</div>

			<!--			Description-->
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center slide-text">
						<p>We see two major differences.<br>
							1) the overall prevalence of COVID is much higher in the NEJM dataset than in the Isr dataset.<br>
							That makes sense, since the NEJM dataset is tracking cases in a hopistal setting, whereas the Isr dataset is measuring the entire population.<br>


							2) The first dataset also is measuring the prevalence of # positive cases, whereas the second dataset tracks the *severe* cases.
							TODO: What is their definition of severe?


							3) The vaccine effectiveness itself is actually calculated via the reduction in *odds*<br>
							APPENDIX: How does our analysis change using odds vs probability? Desmos widget :D

						</p>
					</div>
				</div>
			</div>

			<div class="row justify-content-center">
				<!--			Prevalence Reduction-->
				<div   class="col">
					<div   class="row">
						<p>Prevalence Reduction from NEJM <br>
					</div>
					<div   class="row">
						<div id="prevReduc2" class = "col-xs-7.5 col-sm-4 "></div>
					</div>
				</div>

				<!--			Prevalence Reduction-->
				<div   class="col ">
					<div   class="row">
						<p>Prevalence Reduction from August 15th Israel data <br>
					</div>
					<div   class="row">
						<div id="prevReduc3" class = "col-xs-7.5 col-sm-4 "></div>
					</div>
				</div>

			</div>



		</div>

	</div>





<!--Question: Is There Waning Vaccine Effectiveness?-->
	<div class="section s2">
		<div class="container-fluid">

			<!--			Title-->
			<div class="section-title">
				<h1>Is there waning efficacy? </h1>
			</div>

			<!--			Description-->
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center slide-text">
						<p>We see a reduction between the vaccinated and unvaccinated cohort.<br>
							But the reduction is mild - only about a 3x reduction.<br>
							This translates to a ~65% effectiveness. Oh no!<br>
						</p>
					</div>
				</div>
			</div>

			<!--			Prevalence Reduction-->
			<div   class="col justify-content-center">
				<div   class="row justify-content-center">
					<p>Prevalence Reduction from August 15th Israel data <br>
				</div>
				<div   class="row justify-content-center">
					<div id="prevReduc4" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>
		</div>

	</div>









<!--Answer: No waning efficacy if we look at one age group at a time!-->
	<div class="section s2">
		<div class="container-fluid">

			<!--			Title-->
			<div class="section-title">
				<h1>Efficacy still looks strong within each age group! </h1>
			</div>

			<!--			Description-->
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center slide-text">
						<p>When we pay attention to one age group at a time, the situation looks better.<br>
							The reduction is now stronger - closer to a 10x reduction.<br>
							This translates to a ~95% effectiveness. Ah :)<br>
						</p>
					</div>
				</div>
			</div>

			<!--			Prevalence Reduction-->

			<div   class="row justify-content-center">
				<div class="col-5">
					<div   class="row justify-content-center">
						<p>Prevalence Reduction from August 15th Israel data 12-49 <br>
					</div>
					<div id="prevReduc5" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
				<div class="col-5">
					<div   class="row justify-content-center">
						<p>Prevalence Reduction from August 15th Israel data >= 50 <br>
					</div>
					<div id="prevReduc6" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>

		</div>

	</div>




<!--Lets look at these proportions scaled to population-->
	<div class="section s2">
		<div class="container-fluid">

			<!--			Title-->
			<div class="section-title">
				<h1>To help explain this, lets adjust by population</h1>
			</div>

			<!--			Description-->
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center slide-text">
						<p>Lets look at these efficacy reduction proportions, scaled to the population of each cohort<br>
						</p>
					</div>
				</div>
			</div>

			<!--			Prevalence Reduction-->
			<div   class="row justify-content-center">
				<div class="col-5">
					<div   class="row justify-content-center">
						<p>Prevalence Reduction from August 15th Israel data All Ages <br>
					</div>
					<div id="prevReduc4Age" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>
			<div   class="row justify-content-center">
				<div class="col-5">
					<div   class="row justify-content-center">
						<p>Prevalence Reduction from August 15th Israel data 12-49 <br>
					</div>
					<div id="prevReduc5Age" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
				<div class="col-5">
					<div   class="row justify-content-center">
						<p>Prevalence Reduction from August 15th Israel data >= 50 <br>
					</div>
					<div id="prevReduc6Age" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>

		</div>

	</div>





<!--Question: Why do the two datasets act differently-->
	<div class="section s2">
		<div class="container-fluid">

			<!--			Title-->
			<div class="section-title">
				<h1> But notice - splitting by age did not cause this problem with the NEJM data </h1>
			</div>

			<!--			Description-->
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center slide-text">
						<p>What is different between these two scenarios?<br>
						Splitting by age causes a problem for the Israel data, but not the NEJM data.<br>
						What causes that difference?<br>

						</p>
					</div>
				</div>
			</div>

			<!--			Prevalence Reduction-->
			<div   class="row justify-content-center">
				<div class="col-5">
					NEJM >= 12
					<div id="prevReduc7" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
				<div class="col-5">
					Isr >= 12
					<div id="prevReduc8" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>

			<div   class="row justify-content-center">
				<div class="col-5">
					NEJM 12-49
					<div id="prevReduc9" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
				<div class="col-5">
					Isr 12-49
					<div id="prevReduc10" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>

			<div   class="row justify-content-center">
				<div class="col-5">
					NEJM >= 50
					<div id="prevReduc11" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
				<div class="col-5">
					Isr >= 50
					<div id="prevReduc12" class = "col-xs-7.5 col-sm-4 "></div>
				</div>
			</div>

		</div>

	</div>









	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Histograms!!! </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div id='myHistIsrAug15' class="row justify-content-center">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Histograms!!! </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div id='myHistIsrAug15Age2' class="row justify-content-center">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Histograms!!! </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div id='myHistIsrAug15Age10' class="row justify-content-center">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Histograms!!! </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div id='myHistIsrSep2' class="row justify-content-center">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Histograms!!! </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div id='myHistIsrSep2Age2' class="row justify-content-center">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Histograms!!! </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div id='myHistIsrSep2Age10' class="row justify-content-center">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Histograms!!! </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div id='myHistIsrSep20Age10' class="row justify-content-center">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1> DESMOS!!!!!!!</h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<iframe src="https://www.desmos.com/calculator/ipvvdbwdze?embed" width="500" height="500" style="border: 1px solid #ccc" frameborder=0></iframe>
				</div>
			</div>
		</div>
	</div>


	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Simpson's Paradox</h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center slide-text">
						<p> Waning efficacy is a real thing: <br>
							https://www.nytimes.com/live/2021/09/17/world/covid-delta-variant-vaccine <br>

							However, over the summer, there was a moment where people were reacting prematurely to the idea of waning efficacy. New data suggested vaccine effectiveness dropped from ~95% down to ~66%. However, this is fixed when analyzing the age groups one at a time. <br>


							This is because age is a confounding variable. Our results change drastically depending on whether we consider this variable, which is an example of Simpson’s paradox: <br>

							“Simpson’s paradox, or the Yule–Simpson effect, is a phenomenon in probability and statistics, in which a trend appears in several different groups of data but disappears or reverses when these groups are combined”


						</p>
					</div>
				</div>
			</div>
		</div>
	</div>




	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Confounding Factor: Simpson's paradox </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center">
						<div class="col-6">
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
						</div>
						<div class="col-6"> (Visualizations demonstrating paradox for the data sets)</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Why does Simpson's Paradox Appear? </h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-10">
					<div class="row justify-content-center">
						<div class="col-6">
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
						</div>
						<div class="col-6">
							<img src="img/innovative.jpeg" alt="innovative viz">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="section ">
		<div class="container-fluid">
			<div class="section-title">
				<h1>Appendix: Data Privacy</h1>
			</div>
			<div class="row justify-content-center">
				<div class="col-4">
					<div class="row justify-content-center">
						<p>Since age is such an important confounding variable, why is it not widely reported in this data?</p>
						<p>The answer is protection of personally identifying information. Age is one such identifier that, when combined with other bits of personal information, can effectively <b>de-anonymize</b> otherwise anonymous data. This phenomenon is particularly pernicious in the context of highly-sensitive data, like medical records.
						As such, there is an inherent tradeoff between collecting accurate information and preserving stakeholder privacy.</p>
						<p>The visualization on the right shows the total population of the Adult Income Dataset, a benchmark dataset in data privacy literature containing data from the 1994 Census Database. Notice how the combination of even just a few features can dramatically reduce the number of individuals who match that description in the data.</p>
					</div>
				</div>
				<div class="col-4">
					<form class="form-inline">
						<div class="form-group">
							<select class="form-control" id="Age">
								<option value="all-ages">All Ages</option>
								<option value="15-30">15 - 30</option>
								<option value="31-45">31 - 45</option>
								<option value="46-60">46 - 60</option>
								<option value="61-75">61 - 75</option>
							</select>
							<select class="form-control" id="Race">
								<option value="all-races">All Races</option>
								<option value="Black">Black</option>
								<option value="White">White</option>
								<option value="Asian-Pac-Islander">Asian/Pacific Islander</option>
								<option value="Amer-Indian-Eskimo">Native American</option>
								<option value="Other">Other</option>
							</select>
							<select class="form-control" id="Sex">
								<option value="all-sexes">All Sexes</option>
								<option value="Male">Male</option>
								<option value="Female">Female</option>
							</select>


							<!-- Activity IV -->
							<!--<button type="button" class="btn btn-link" id="change-sorting"><i class="glyphicon glyphicon-sort"></i> Sort</button>-->
						</div>
					</form>
					<div class="row justify-content-center" id="priv-viz">
					</div>
				</div>
			</div>
		</div>
	</div>





	<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.extensions.min.js" integrity="sha512-v0jjVvFpZqb1BcXhgLbaBDRKwZ09IpWFZL5NHTNbW9MlSjhZihkxEz2uNeMGd6HuK1qnSEL6JdyTr24ZHlgKow==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script>
		new fullpage('#fullpage', {
			//options here
			autoScrolling:true,
			navigation: true,
			navigationPosition: 'right',



		});
	</script>




	<!-- embedding JS libraries -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

	<!-- d3 -->
	<script src="https://d3js.org/d3.v6.min.js"></script>


	<!-- 3d -->
	<script src="https://unpkg.com/d3-3d/build/d3-3d.min.js"></script>
	<script src="https://d3js.org/d3.v4.min.js"></script>/

	<!-- Your implementation -->




<!--	<script type="text/javascript" src="js/libraries/fullpage.js"></script>-->


	<script src="js/prevalenceReduction.js"></script>
	<script src="js/newHist.js"></script>
	<script src="js/newScatter.js"></script>
	<script src="js/privacyCircle.js"></script>
	<script src="js/main.js"></script>
</div>
</body>
</html>